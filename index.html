<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tinder 最强检测</title>
  <link rel="icon" href="1.jpg" type="image/jpeg">
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#4CAF50',
            secondary: '#FF9800'
          },
          borderRadius: {
            'none': '0px',
            'sm': '2px',
            DEFAULT: '4px',
            'md': '8px',
            'lg': '12px',
            'xl': '16px',
            '2xl': '20px',
            '3xl': '24px',
            'full': '9999px',
            'button': '4px'
          }
        }
      }
    }
  </script>
</head>
<body class="bg-gray-50">
  <!-- 导航栏 -->
  <nav class="navbar-glass fixed w-full z-50 top-0">
    <div class="max-w-7xl mx-auto px-6">
      <div class="flex justify-between items-center h-16">
        <!-- Logo区域 -->
        <div class="flex items-center space-x-4">
          <div class="logo-container">
            <img src="1.jpg" alt="Tinder检测" class="logo-image"/>
          </div>
          <div class="brand-text">
            <h1 class="brand-title">Tinder账号高级检测</h1>
            <p class="brand-subtitle">专业账号分析</p>
          </div>
        </div>

        <!-- 桌面端导航链接 -->
        <div class="nav-links desktop-nav">
          <a href="https://t.me/Tinder_Acco" target="_blank" class="nav-link nav-link-primary">
            <i class="fas fa-fire"></i>
            <span>Tinder学习频道</span>
          </a>
          <a href="#" onclick="openGuideModal()" class="nav-link nav-link-secondary">
            <i class="fas fa-book-open"></i>
            <span>使用教程</span>
          </a>
          <a href="#" onclick="openContactModal()" class="nav-link nav-link-accent">
            <i class="fas fa-check-circle"></i>
            <span>官方认证查询</span>
          </a>
          <a href="https://9d9c.com/" target="_blank" class="nav-link nav-link-special">
            <i class="fas fa-shopping-cart"></i>
            <span>火种老号发卡网</span>
          </a>
        </div>

        <!-- 移动端汉堡菜单按钮 -->
        <button class="mobile-menu-btn" onclick="toggleMobileMenu()" aria-label="菜单">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
      </div>

      <!-- 移动端导航菜单 -->
      <div class="mobile-nav" id="mobileNav">
        <div class="mobile-nav-content">
          <a href="https://t.me/Tinder_Acco" target="_blank" class="mobile-nav-link">
            <i class="fas fa-fire"></i>
            <span>Tinder学习频道</span>
          </a>
          <a href="#" onclick="openGuideModal(); closeMobileMenu();" class="mobile-nav-link">
            <i class="fas fa-book-open"></i>
            <span>使用教程</span>
          </a>
          <a href="#" onclick="openContactModal(); closeMobileMenu();" class="mobile-nav-link">
            <i class="fas fa-check-circle"></i>
            <span>官方认证查询</span>
          </a>
          <a href="https://9d9c.com/" target="_blank" class="mobile-nav-link">
            <i class="fas fa-shopping-cart"></i>
            <span>火种老号发卡网</span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <!-- 客服模态框 -->
  <div id="contactModal" class="contact-modal">
    <div class="contact-modal-content">
        <div class="contact-modal-header">
            <h2 class="contact-modal-title"><i class="fas fa-check-circle"></i> 官方认证渠道</h2>
        </div>
        <div class="contact-modal-body">
            <div class="contact-section">
                <h3 class="contact-section-title">联系方式</h3>
                <p class="contact-item">
                    <i class="fab fa-telegram contact-icon telegram"></i>
                    <strong>官方客服:</strong>
                    <a href="https://t.me/MLcsg001" target="_blank">@MLcsg001 (梅拉火种专业户)</a>
                </p>
                <p class="contact-item">
                    <i class="fab fa-telegram contact-icon telegram"></i>
                    <strong>官方频道:</strong>
                    <a href="https://t.me/TinderAcc0" target="_blank">@TinderAcc0</a>
                </p>
                <p class="contact-item">
                    <i class="fab fa-telegram contact-icon telegram"></i>
                    <strong>备用频道:</strong>
                    <a href="https://t.me/Tinder_Acco" target="_blank">@Tinder_Acco</a>
                </p>
            </div>
            <div class="contact-section">
                <h3 class="contact-section-title">官方网站</h3>
                <p class="contact-item">
                    <i class="fas fa-search-location contact-icon web"></i>
                    <strong>官方查活:</strong>
                    <a href="https://www.00AP.com/" target="_blank">www.00AP.com</a>
                </p>
                <p class="contact-item">
                    <i class="fas fa-credit-card contact-icon web"></i>
                    <strong>官方发卡:</strong>
                    <a href="https://9d9c.com/" target="_blank">www.9d9c.com</a>
                </p>
            </div>
            <div class="contact-section">
                <h3 class="contact-section-title">收款地址 (USDT-TRC20)</h3>
                <div class="contact-address">
                    <p class="address-label">业务地址:</p>
                    <p class="address-string"><span>TDJLkRE6LykrreLDw2Q7zpas<strong class="address-highlight">881a2a3a4a</strong></span></p>
                </div>
                <div class="contact-address">
                    <p class="address-label">发卡地址:</p>
                    <p class="address-string"><span>TVhP5smK3w7g5sUnndbFtP6r<strong class="address-highlight">hh1e2e3e4e</strong></span></p>
                </div>
            </div>
        </div>
        <div class="close-button-container">
            <button class="contact-modal-close" onclick="closeContactModal()">关闭</button>
        </div>
    </div>
  </div>

  <!-- 使用教程模态框 -->
  <div id="guideModal" class="contact-modal">
    <div class="contact-modal-content no-copy guide-modal-content">
      <div class="guide-modal-header">
        <h2 class="guide-modal-title">🔥 Tinder账号使用指南 🔥</h2>
      </div>

      <div class="guide-modal-body">
        <div class="guide-section">
          <h3 class="guide-section-title"><i class="fas fa-user-shield"></i>Tinder老号说明</h3>
          <p>🔥 所有账号保证登录+匹配，均为1-10年私人老号</p>
          <p>🔥 账号存活率 = 50%养号耐心 + 30%运气加持 + 20%操作技巧</p>
          <p>🔥 账号是入场券，玩法全靠你自己！</p>
          <div class="guide-alert guide-alert-warning">
            <p><strong>注意</strong>：仅提供基础功能，后续养号靠自己！不想账号"猝死"？别一上来就猛刷，稳扎稳打才是王道！接受不了风险的请绕行，避免不必要纠纷。</p>
          </div>
          <div class="guide-alert guide-alert-danger">
            <p><strong>不包引流功能</strong>——要是有，我早自己拿去做业务啦！懂的都懂～</p>
          </div>
        </div>

        <div class="guide-section">
          <h3 class="guide-section-title"><i class="fas fa-list-ol"></i>使用流程</h3>
          <ol class="guide-list">
            <li>拿到账号后，先登录测试，确认能否正常匹配和使用。</li>
            <li>若遇到问题（如无法匹配或登录失败），立即联系客服售后处理，过期不候！</li>
            <li>登录并检查无误后，交易即完成。后期勿以"没登录"或"挂着就死"为由售后。</li>
          </ol>
        </div>

        <div class="guide-section">
          <h3 class="guide-section-title"><i class="fas fa-exclamation-triangle"></i>风险说明</h3>
          <p>这类风险大家心知肚明，世界上没有100%保险的事，不然我早自己去做业务了！</p>
          <p>例如：一个号可能开出100万U订单，也可能第二天就挂；甚至开出500万U也跟我无关。风险自担，请自行权衡再下单！</p>
        </div>

        <div class="guide-section">
          <h3 class="guide-section-title"><i class="fas fa-seedling"></i>养号须知</h3>
          <p><strong>养号周期</strong>：建议养1天后再正式使用。前1天可每天登录，偶尔匹配1人，确认账号正常（建议暂不发消息）。</p>
          <p><strong>耐心为王</strong>：养号是关键，别急着操作！基本上都是养1-3天后再去使用！</p>
          <div class="guide-alert guide-alert-danger">
            <p><strong>严禁操作</strong>：严禁私自更改照片！尤其是设置个性签名，设置必挂！匹配距离不得超过69，设置超过69必挂！</p>
          </div>
          <div class="guide-alert guide-alert-info">
            <p><strong>可调整项</strong>：匹配性别、匹配年龄（年龄上限69岁）。70岁以上的账号没啥用，一只脚都踏进棺材了，还要来干嘛？</p>
          </div>
        </div>
        
        <div class="guide-section">
          <h3 class="guide-section-title"><i class="fas fa-comment-dots"></i>Tinder官方风控敏感词须知</h3>
          <div class="guide-alert guide-alert-warning">
            <p>触发官方敏感词必挂（99%的狗推都这么说）</p>
          </div>
          <ul class="guide-ul">
            <li>"你在这找什么？" / "你想找什么样的关系？"</li>
            <li>涉及地区、国家、数字号码、社交软件ID、钱财相关或色情类内容</li>
            <li>各类App名称（如WhatsApp、Line、Telegram）</li>
          </ul>
        </div>

        <div class="guide-section">
          <h3 class="guide-section-title"><i class="fas fa-lightbulb"></i>使用建议</h3>
          <ul class="guide-ul">
            <li><strong>打招呼规则</strong>：不要连续给新赞的人打招呼，别用统一模板，禁止群发（群发必死）。可用：Hi / Hello / Heyyy / How are you? / Hello, nice to meet you / Hi。</li>
            <li><strong>回复策略</strong>：匹配成功后别每次都主动打招呼，也不用每人都回复，真人不会人人搭理。</li>
            <li><strong>消息处理</strong>：上班打开Tinder时若有一堆消息，别一次性全回，建议隔开回复。</li>
            <li><strong>模拟真人</strong>：先回1-2个消息，然后匹配新人，再慢慢回复其他消息，间隔10分钟以上再匹配（黄金会员可直接选人匹配）。</li>
            <li><strong>匹配频率</strong>：每天匹配人数控制在10人以内。</li>
            <li><strong>浏览习惯</strong>：匹配时把对方照片看完刷完，模拟正常交友查看资料的行为。</li>
            <li><strong>男号技巧</strong>：女赞少时，可临时匹配所有性别提升点赞量和活跃度，攒到99+赞后再改回匹配女性。</li>
            <li><strong>号码处理</strong>：让对方主动发号码，别自己发。询问WhatsApp时用简称"wts ap"或发送WS名片。</li>
            <li><strong>引流技巧</strong>：引流成功的客户，在Tinder上取消匹配，避免切客失败时被举报。</li>
            <li><strong>核心原则</strong>：只要规避敏感词、不被举报，账号就不会轻易挂。引流技术不到位，买再好的号也是浪费钱。</li>
            <li><strong>被动策略</strong>：别太主动，太积极容易被察觉并举报，这是封号的重要原因。</li>
            <li><strong>智能检测</strong>：Tinder机制越来越智能，注意事项只是基础，多观察正常交友的聊天方式，不断改进。</li>
            <li><strong>别急着引流</strong>：给对方暗示保持联系，才能避免违规。</li>
            <li><strong>不在线时</strong>：别一直挂着，关闭浏览器即可。</li>
          </ul>
        </div>
      </div>
      
      <div class="close-button-container">
        <button class="contact-modal-close" onclick="closeGuideModal()">我已了解</button>
      </div>
    </div>
  </div>

  <!-- 总结模态框 -->
  <div id="summaryModal" class="summary-modal">
    <div class="summary-modal-content">
      <div class="title">
        🔥 查询结果总结（5次查询）🔥
      </div>
      <div id="overallStatus" class="overall-status"></div>
      <div class="table-wrapper">
        <table id="summaryTable">
          <thead>
            <tr>
              <th>用户名</th>
              <th>用户状态</th>
              <th>账号状态</th>
              <th>名字</th>
              <th>年龄</th>
              <th>注册日期</th>
              <th>照片数</th>
            </tr>
          </thead>
          <tbody id="summaryTableBody">
            <!-- 动态填充 -->
          </tbody>
        </table>
      </div>
      <div class="close-button-container">
        <button class="contact-modal-close" onclick="closeSummaryModal()">关闭</button>
      </div>
    </div>
  </div>

  <!-- IP推荐模态框 -->
  <div id="ipRecommendModal" class="ip-recommend-modal">
    <div class="ip-recommend-modal-content">
      <div class="title">
        🔥 IP及指纹浏览器推荐 🔥
      </div>
      <h3>稳定IP推荐</h3>
      <p>动态推荐：ROLA-ip <a href="https://www.rola-ip.co/" target="_blank">点击跳转</a></p>
      <p>静态推荐：proxyline <a href="https://proxyline.net?ref=289643" target="_blank">点击跳转</a></p>
      <h3>指纹浏览器推荐</h3>
      <p>ADS指纹浏览器：<a href="https://share.adspower.net/pw0IiLjNROt6kiJ" target="_blank">点击跳转</a></p>
      <p>比特指纹浏览器：<a href="https://www.bitbrowser.cn/?code=aad771" target="_blank">点击跳转</a></p>
      <div class="close-button-container">
        <button class="contact-modal-close" onclick="closeIpRecommendModal()">关闭</button>
      </div>
    </div>
  </div>

  <!-- 第二屏：专业查询区域 -->
  <section id="querySection" class="min-h-screen bg-gray-50 pt-20">
    <div class="max-w-6xl mx-auto px-4 sm:px-6">
      <!-- 标题区域 -->
      <div class="section-title">
        <h2>
          <i class="fas fa-search-plus text-purple-600 mr-3"></i>
          梅拉专业检测工具
        </h2>
        <p>
          输入Tinder用户名，获取详细的账号状态分析报告
        </p>
      </div>

      <!-- 主查询区域 -->
      <div class="query-main-container">
        <div class="query-grid">
          <!-- 左侧：查询表单 -->
          <div class="query-form-section">
            <div class="card-purple query-form-card">
              <h3 class="form-section-title">
                <i class="fas fa-user-circle text-purple-600 mr-2"></i>
                火种账号检测
              </h3>

              <div class="space-y-4">
                <div>
                  <label for="mainUsernameInput" class="block text-sm font-medium text-gray-700 mb-2">
                    Tinder用户名
                  </label>
                  <input
                    id="mainUsernameInput"
                    type="text"
                    class="form-input"
                    placeholder="请输入Tinder用户名"
                  >
                </div>

                <div class="query-button-grid">
                  <button id="searchBtn" class="btn-primary btn-full-span">
                    <i class="fas fa-search mr-2"></i>开始检测
                  </button>
                  <button id="clearBtn" class="btn-secondary">
                    <i class="fas fa-trash mr-1.5"></i>清除
                  </button>
                  <button id="confirmBtn" class="btn-info">
                    <i class="fas fa-external-link-alt mr-1.5"></i>官网查询
                  </button>
                </div>

                <button id="newBtn" class="btn-accent">
                  <i class="fas fa-plus mr-1.5"></i>IP及指纹浏览器推荐
                </button>
              </div>
            </div>
            
            <!-- Tinder风格按钮 - 定制账号服务 -->
            <div class="button-container">
              <a href="https://t.me/Tinder_Acco" target="_blank" class="custom-button">
                <i class="fa-solid fa-fire tinder-icon"></i>
                <span class="button-text">全球老号定制30<span class="usdt-icon">₮</span>起，点击联系！<i class="fa-brands fa-telegram telegram-icon"></i></span>
              </a>
            </div>
          </div>

          <!-- 右侧：检测结果 -->
          <div class="query-results-section">
            <div id="resultsSection">
              <!-- 默认状态 -->
              <div id="defaultState" class="default-state hidden">
                <div class="icon-container-gray">
                  <i class="fas fa-search text-3xl text-gray-400"></i>
                </div>
                <h3>等待检测</h3>
                <p>请输入Tinder用户名并点击"开始检测"</p>
              </div>

              <!-- 检测结果内容 -->
              <div id="resultContent" class="show result-content-reset">
                <div class="space-y-6">
                <!-- 状态概览 -->
                <div class="status-overview-grid">
                  <div class="card-status-blue">
                    <h4 class="status-card-title">
                      <i class="fas fa-user-shield text-blue-600 mr-2"></i>
                      用户状态
                    </h4>
                    <div id="aliveStatus" class="status-tag bg-gray-400">—</div>
                  </div>
                  <div class="card-status-green">
                    <h4 class="status-card-title">
                      <i class="fas fa-shield-alt text-green-600 mr-2"></i>
                      账号状态
                    </h4>
                    <div id="accountStatus" class="status-default">—</div>
                  </div>
                </div>

                <!-- 详细信息 -->
                <div class="card-white">
                  <h4 class="detail-section-title">
                    <i class="fas fa-info-circle text-indigo-600 mr-2"></i>
                    详细信息
                  </h4>
                  <div class="detail-info-vertical">
                    <div class="info-item">
                      <label for="nameInput" class="block text-sm font-medium text-gray-700 mb-1">
                        <i class="fas fa-id-card text-blue-600 mr-1"></i>姓名
                      </label>
                      <input id="nameInput" type="text" class="form-input" readonly>
                    </div>
                    
                    <div class="info-row">
                      <div class="info-item-half">
                        <label for="ageInput" class="block text-sm font-medium text-gray-700 mb-1">
                          <i class="fas fa-birthday-cake text-indigo-500 mr-1"></i>年龄
                        </label>
                        <input id="ageInput" type="text" class="form-input" readonly>
                      </div>
                      <div class="info-item-half">
                        <label for="birthInput" class="block text-sm font-medium text-gray-700 mb-1">
                          <i class="fas fa-gift text-indigo-500 mr-1"></i>出生日期
                        </label>
                        <input id="birthInput" type="text" class="form-input" readonly>
                      </div>
                    </div>
                    
                    <div class="info-item">
                      <label for="regInput" class="block text-sm font-medium text-gray-700 mb-1">
                        <i class="fas fa-calendar-plus text-blue-500 mr-1"></i>注册日期
                      </label>
                      <input id="regInput" type="text" class="form-input" readonly>
                    </div>
                  </div>
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 照片展示 - 移到两个表单下方 -->
        <div class="mt-8" id="photoDisplayContainer">
          <div id="photoDisplay" class="card-white">
            <h4 class="detail-section-title">
              <i class="fas fa-camera text-indigo-600 mr-2"></i>
              用户照片
            </h4>
            <div id="photoCarousel" class="photo-carousel">
              <div class="no-photos"><i class="fas fa-image mr-2"></i>暂无照片</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

    <!-- 图片预览模态框 -->
    <div id="imageModal" class="modal" onclick="closeImageModal()">
      <span class="modal-close">×</span>
      <img class="modal-content" id="modalImage">
    </div>

  <script>
    let queryResults = [];
    const maxQueries = 5;

    // 移动端菜单控制函数
    function toggleMobileMenu() {
      const mobileNav = document.getElementById('mobileNav');
      const menuBtn = document.querySelector('.mobile-menu-btn');

      mobileNav.classList.toggle('mobile-nav-open');
      menuBtn.classList.toggle('menu-open');

      // 防止背景滚动
      document.body.classList.toggle('menu-open');
    }

    function closeMobileMenu() {
      const mobileNav = document.getElementById('mobileNav');
      const menuBtn = document.querySelector('.mobile-menu-btn');

      mobileNav.classList.remove('mobile-nav-open');
      menuBtn.classList.remove('menu-open');
      document.body.classList.remove('menu-open');
    }

    // 通用模态框控制函数
    function toggleModal(modalId, show = true) {
      const modal = document.getElementById(modalId);
      modal.classList.toggle("modal-show", show);
      modal.classList.toggle("modal-hide", !show);
    }

    function openImageModal(src) {
      toggleModal("imageModal", true);
      document.getElementById("modalImage").src = src;
    }
    function closeImageModal() { toggleModal("imageModal", false); }
    function openContactModal() { toggleModal("contactModal"); }
    function closeContactModal() { toggleModal("contactModal", false); }
    function openGuideModal() { toggleModal("guideModal"); }
    function closeGuideModal() { toggleModal("guideModal", false); }
    function openSummaryModal() { toggleModal("summaryModal"); }
    function closeSummaryModal() { toggleModal("summaryModal", false); }
    function openIpRecommendModal() { toggleModal("ipRecommendModal"); }
    function closeIpRecommendModal() { toggleModal("ipRecommendModal", false); }

    document.addEventListener('DOMContentLoaded', () => {
      // 导航栏滚动效果
      const navbar = document.querySelector('.navbar-glass');
      let lastScrollY = window.scrollY;

      function updateNavbar() {
        const currentScrollY = window.scrollY;

        if (currentScrollY > 50) {
          navbar.classList.add('scrolled');
        } else {
          navbar.classList.remove('scrolled');
        }

        lastScrollY = currentScrollY;
      }

      // 节流函数优化性能
      let ticking = false;
      function requestTick() {
        if (!ticking) {
          requestAnimationFrame(updateNavbar);
          ticking = true;
          setTimeout(() => { ticking = false; }, 16);
        }
      }

      window.addEventListener('scroll', requestTick);

      // 移动端菜单点击外部关闭
      document.addEventListener('click', (e) => {
        const mobileNav = document.getElementById('mobileNav');
        const menuBtn = document.querySelector('.mobile-menu-btn');

        if (mobileNav.classList.contains('mobile-nav-open') &&
            !mobileNav.contains(e.target) &&
            !menuBtn.contains(e.target)) {
          closeMobileMenu();
        }
      });

      // 窗口大小改变时关闭移动端菜单
      window.addEventListener('resize', () => {
        if (window.innerWidth > 767) {
          closeMobileMenu();
        }
      });

      const guideModalContent = document.querySelector('#guideModal .contact-modal-content');
      guideModalContent.addEventListener('contextmenu', (e) => {
        e.preventDefault();
      });
      guideModalContent.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'c') {
          e.preventDefault();
        }
        if ((e.ctrlKey || e.metaKey) && e.key === 'a') {
          e.preventDefault();
        }
      });
      guideModalContent.addEventListener('dragstart', (e) => {
        e.preventDefault();
      });
      guideModalContent.addEventListener('copy', (e) => {
        e.preventDefault();
      });
    });

    function clearDetails() {
      document.getElementById('mainUsernameInput').value = '';
      document.getElementById('aliveStatus').textContent = '—';
      document.getElementById('aliveStatus').className = 'status-tag bg-gray-400';
      document.getElementById('accountStatus').textContent = '—';
      document.getElementById('accountStatus').className = 'status-default';
      ['nameInput','ageInput','birthInput','regInput'].forEach(id => {
        document.getElementById(id).value = '';
      });
      const carousel = document.getElementById('photoCarousel');
      carousel.innerHTML = '<div class="no-photos"><i class="fas fa-image mr-2"></i>暂无照片</div>';
      carousel.className = 'photo-carousel';
    }

    function displayIndividualResult(result) {
      const aSpan = document.getElementById('aliveStatus');
      const cSpan = document.getElementById('accountStatus');
      const carousel = document.getElementById('photoCarousel');

      if (!aSpan || !cSpan || !carousel) {
        console.error('Required elements not found:', { aSpan, cSpan, carousel });
        return;
      }

      carousel.innerHTML = '';
      if (!result.alive) {
        aSpan.innerHTML = '<i class="fas fa-circle-xmark mr-1"></i>官方用户名不存在或死号';
        aSpan.className = 'status-tag bg-red-500';
        cSpan.textContent = '—';
        cSpan.className = 'status-default';
        ['nameInput','ageInput','birthInput','regInput'].forEach(id => {
          document.getElementById(id).value = '';
        });
        return;
      }
      aSpan.innerHTML = '<i class="fas fa-circle-check mr-1"></i>官方用户名存在';
      aSpan.className = 'status-tag bg-primary';
      if (result.accountOk) {
        cSpan.innerHTML = '<i class="fas fa-thumbs-up mr-1"></i>账号正常（正常匹配）';
        cSpan.className = 'status-normal';
      } else {
        cSpan.innerHTML = '<i class="fas fa-ban mr-1"></i>封禁的账号/限流（无法匹配）';
        cSpan.className = 'status-banned';
      }
      document.getElementById('nameInput').value = result.name || '';
      document.getElementById('ageInput').value = result.age != null ? result.age + '岁' : '';
      document.getElementById('birthInput').value = result.birthDate || '';
      const regDate = result.regDate || '';
      if (regDate) {
        const today = new Date();
        const registrationDate = new Date(regDate);
        const timeDiff = today - registrationDate;
        const daysSince = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
        const regInput = document.getElementById('regInput');

        // 清除所有样式类
        regInput.className = regInput.className.replace(/reg-date-\w+/g, '').trim() + ' form-input';
        
        // 优化日期显示格式
        let dateDesc = '';
        if (daysSince > 365) {
          dateDesc = `(${daysSince}天 - 超过一年)`;
          regInput.classList.add('reg-date-old');
        } else if (daysSince > 210) {
          dateDesc = `(${daysSince}天 - 超过7个月)`;
          regInput.classList.add('reg-date-very-old');
        } else if (daysSince > 90) {
          dateDesc = `(${daysSince}天 - 超过3个月)`;
          regInput.classList.add('reg-date-old-medium');
        } else if (daysSince > 30) {
          dateDesc = `(${daysSince}天 - 超过1个月)`;
          regInput.classList.add('reg-date-medium');
        } else if (daysSince > 7) {
          dateDesc = `(${daysSince}天 - 超过1周)`;
          regInput.classList.add('reg-date-recent');
        } else {
          dateDesc = `(${daysSince}天)`;
          regInput.classList.add('reg-date-normal');
        }
        
        regInput.value = `${regDate} ${dateDesc}`;
        
        // 添加tooltip属性，在鼠标悬停时显示完整信息
        regInput.setAttribute('title', `${regDate} ${dateDesc}`);
      } else {
        document.getElementById('regInput').value = '';
      }
      if (result.photos && result.photos.length > 0) {
        carousel.className = 'photo-banner-container';

        const mainImage = document.createElement('img');
        mainImage.src = result.photos[0];
        mainImage.className = 'main-banner-image';
        mainImage.onclick = () => openImageModal(mainImage.src);
        carousel.appendChild(mainImage);

        const thumbnailStrip = document.createElement('div');
        thumbnailStrip.className = 'thumbnail-strip';
        carousel.appendChild(thumbnailStrip);

        result.photos.forEach((url, index) => {
          const thumbImg = document.createElement('img');
          thumbImg.src = url;
          thumbImg.className = 'thumbnail-image';
          if (index === 0) {
            thumbImg.classList.add('active');
          }
          thumbImg.onclick = () => {
            mainImage.src = url;
            thumbnailStrip.querySelector('.thumbnail-image.active')?.classList.remove('active');
            thumbImg.classList.add('active');
          };
          thumbnailStrip.appendChild(thumbImg);
        });
      } else {
        carousel.innerHTML = '<div class="no-photos"><i class="fas fa-image mr-2"></i>暂无照片</div>';
        carousel.className = 'photo-carousel';
      }
    }

    function displaySummary() {
      const tbody = document.getElementById('summaryTableBody');
      const overallStatus = document.getElementById('overallStatus');
      tbody.innerHTML = '';
      const hasNormalAccount = queryResults.some(result => result.alive && result.accountOk);
      overallStatus.innerHTML = hasNormalAccount ?
        '<span class="text-green-800"><i class="fas fa-thumbs-up mr-1"></i>总体账号状态：正常（账号正常匹配）</span>' :
        '<span class="text-red-800"><i class="fas fa-ban mr-1"></i>总体账号状态：封禁/限流（无正常账号）</span>';
      queryResults.forEach(result => {
        const tr = document.createElement('tr');
        const aliveStatus = result.alive ? 
          '<span class="status-tag bg-primary"><i class="fas fa-circle-check mr-1"></i>存在</span>' : 
          '<span class="status-tag bg-red-500"><i class="fas fa-circle-xmark mr-1"></i>不存在</span>';
        const accountStatus = result.alive ?
          (result.accountOk ?
            '<span class="status-normal"><i class="fas fa-thumbs-up mr-1"></i>正常</span>' :
            '<span class="status-banned"><i class="fas fa-ban mr-1"></i>封禁/限流</span>') :
          '—';
        const regDate = result.regDate ? (() => {
          const today = new Date();
          const registrationDate = new Date(result.regDate);
          const timeDiff = today - registrationDate;
          const daysSince = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
          if (daysSince > 365) return `${result.regDate} (${daysSince}天 - 超过一年)`;
          if (daysSince > 210) return `${result.regDate} (${daysSince}天 - 超过7个月)`;
          if (daysSince > 90) return `${result.regDate} (${daysSince}天 - 超过3个月)`;
          if (daysSince > 30) return `${result.regDate} (${daysSince}天 - 超过1个月)`;
          if (daysSince > 7) return `${result.regDate} (${daysSince}天 - 超过1周)`;
          return `${result.regDate} (${daysSince}天)`;
        })() : '—';
        tr.innerHTML = `
          <td>${result.username}</td>
          <td>${aliveStatus}</td>
          <td>${accountStatus}</td>
          <td>${result.name || '—'}</td>
          <td>${result.age != null ? result.age + '岁' : '—'}</td>
          <td>${regDate}</td>
          <td>${result.photos ? result.photos.length : 0}</td>
        `;
        tbody.appendChild(tr);
      });
      openSummaryModal();
    }

    async function performQuery(username) {
      try {
        const res = await fetch(`api.php?username=${encodeURIComponent(username)}`);
        const j = await res.json();
        let result = { username };
        if (j.code !== 200 || !j.data) {
          result.alive = false;
          result.accountOk = false;
        } else {
          const d = j.data;
          result.alive = d.alive;
          result.accountOk = d.accountOk;
          result.name = d.name;
          result.age = d.age;
          result.birthDate = d.birthDate;
          result.regDate = d.regDate;
          result.photos = d.photos;
        }
        return result;
      } catch (err) {
        console.error(err);
        throw new Error('查询失败');
      }
    }

    // 第二屏搜索按钮 - 执行实际查询
    document.getElementById('searchBtn').addEventListener('click', async () => {
      const username = document.getElementById('mainUsernameInput').value.trim();
      if (!username) {
        alert('请输入用户名');
        return;
      }

      const searchBtn = document.getElementById('searchBtn');
      const originalText = searchBtn.innerHTML;

      // 显示加载状态
      searchBtn.innerHTML = '<span class="loading-spinner"></span> 检测中...';
      searchBtn.disabled = true;

      // 隐藏默认状态，显示结果区域和照片区域
      const defaultState = document.getElementById('defaultState');
      const resultContent = document.getElementById('resultContent');
      const photoDisplayContainer = document.getElementById('photoDisplayContainer');

      if (defaultState) {
        defaultState.classList.add('default-state-hide');
        defaultState.classList.remove('default-state-show');
      }
      if (resultContent) {
        resultContent.classList.remove('hidden');
        // 已经在HTML中添加了show类，无需再次添加
      }
      if (photoDisplayContainer) {
        photoDisplayContainer.classList.remove('hidden');
      }

      try {
        // 初始化查询结果数组
        queryResults = [];
        // 执行查询
        const result = await performQuery(username);
        
        // 填充查询结果数组，复制5份相同结果用于总结显示
        for (let i = 0; i < maxQueries; i++) {
          queryResults.push({...result});
        }
        
        // 显示单个查询结果
        displayIndividualResult(result);
        
        // 显示总结模态框
        displaySummary();
      } catch (err) {
        console.error(err);
        alert('查询失败，请稍后重试');
      } finally {
        // 恢复按钮状态
        searchBtn.innerHTML = originalText;
        searchBtn.disabled = false;
      }
    });

    // 通用按钮事件处理
    function clearInput(inputId) {
      document.getElementById(inputId).value = '';
    }

    function openTinderProfile(inputId) {
      const username = document.getElementById(inputId).value.trim();
      if (username) {
        window.open(`https://tinder.com/@${encodeURIComponent(username)}`, '_blank');
      }
    }

    function resetToDefaultState() {
      clearDetails();
      queryResults = [];
    }

    // 按钮事件绑定
    document.getElementById('clearBtn').addEventListener('click', resetToDefaultState);
    document.getElementById('confirmBtn').addEventListener('click', () => openTinderProfile('mainUsernameInput'));
    document.getElementById('newBtn').addEventListener('click', openIpRecommendModal);
  </script>
</body>
</html>
